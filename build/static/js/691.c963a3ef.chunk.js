"use strict";(self.webpackChunkovertime_publicpage_actualizadots=self.webpackChunkovertime_publicpage_actualizadots||[]).push([[691],{38:(e,t,s)=>{s.d(t,{O:()=>i});var a=s(9379),l=s(1663);class i{static async getAll(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[s,a]=e;void 0!==a&&null!==a&&t.append(s,String(a))});const s=t.toString()?"".concat(this.API_ENDPOINT,"?").concat(t):this.API_ENDPOINT;return(await(0,l.t)(s)).map(e=>(0,a.A)((0,a.A)({},e),{},{id:e._id||e.id}))}static async getById(e){const t=await(0,l.t)("".concat(this.API_ENDPOINT,"/").concat(e));return(0,a.A)((0,a.A)({},t),{},{id:t._id||t.id})}static async create(e){return(0,l.t)("".concat(this.API_ENDPOINT),{method:"POST",body:JSON.stringify(e)})}static async update(e,t){return(0,l.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"PATCH",body:JSON.stringify(t)})}static async delete(e){return(0,l.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"DELETE"})}static async getByEstado(e){return(0,l.t)("".concat(this.API_ENDPOINT,"?estado=").concat(e))}static async getActivas(){return this.getByEstado("en_curso")}static async getProximas(){return this.getByEstado("proximamente")}}i.API_ENDPOINT="/competencias"},468:(e,t,s)=>{s.d(t,{P:()=>r});var a=s(5043),l=s(1663),i=s(579);const r=e=>{let{faseId:t,participaciones:s}=e;const[r,n]=(0,a.useState)(s||[]),[o,d]=(0,a.useState)(!s),[c,u]=(0,a.useState)(null);if((0,a.useEffect)(()=>{if(s)return n(s),void d(!1);(async()=>{if(t)try{const e=new URLSearchParams({fase:t}),s=await(0,l.t)("/participacion-fase?".concat(e.toString()),{useAuth:!1});n(s)}catch(e){u("Error al cargar la tabla de posiciones")}finally{d(!1)}})()},[t,s]),o)return(0,i.jsx)("div",{children:"Cargando tabla de posiciones..."});if(c)return(0,i.jsx)("div",{children:c});const x={};return r.forEach(e=>{const t=e.grupo||e.division||"general";x[t]||(x[t]=[]),x[t].push(e)}),Object.keys(x).forEach(e=>{x[e].sort((e,t)=>t.puntos-e.puntos)}),(0,i.jsx)("div",{className:"tabla-posiciones",children:Object.entries(x).map(e=>{let[t,s]=e;return(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-4",children:"general"===t?"Tabla General":"Grupo/Divisi\xf3n: ".concat(t)}),(0,i.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"bg-gray-100",children:[(0,i.jsx)("th",{className:"py-2 px-4 border",children:"Pos"}),(0,i.jsx)("th",{className:"py-2 px-4 border",children:"Equipo"}),(0,i.jsx)("th",{className:"py-2 px-4 border",children:"PJ"}),(0,i.jsx)("th",{className:"py-2 px-4 border",children:"PG"}),(0,i.jsx)("th",{className:"py-2 px-4 border",children:"PP"}),(0,i.jsx)("th",{className:"py-2 px-4 border",children:"PE"}),(0,i.jsx)("th",{className:"py-2 px-4 border",children:"Dif"}),(0,i.jsx)("th",{className:"py-2 px-4 border",children:"Pts"})]})}),(0,i.jsx)("tbody",{children:s.map((e,t)=>{var s,a;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"py-2 px-4 border text-center",children:t+1}),(0,i.jsx)("td",{className:"py-2 px-4 border",children:(null===(s=e.participacionTemporada)||void 0===s||null===(a=s.equipo)||void 0===a?void 0:a.nombre)||"Equipo desconocido"}),(0,i.jsx)("td",{className:"py-2 px-4 border text-center",children:e.partidosJugados}),(0,i.jsx)("td",{className:"py-2 px-4 border text-center",children:e.partidosGanados}),(0,i.jsx)("td",{className:"py-2 px-4 border text-center",children:e.partidosPerdidos}),(0,i.jsx)("td",{className:"py-2 px-4 border text-center",children:e.partidosEmpatados}),(0,i.jsx)("td",{className:"py-2 px-4 border text-center",children:e.diferenciaPuntos}),(0,i.jsx)("td",{className:"py-2 px-4 border text-center font-bold",children:e.puntos})]},e.id)})})]})]},t)})})}},3207:(e,t,s)=>{s.d(t,{t:()=>l});var a=s(5043);function l(e){const[t,s]=(0,a.useState)(),[l,i]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null),o=(0,a.useCallback)(async()=>{i(!0),n(null);try{const t=await e();s(t)}catch(t){n(t instanceof Error?t.message:"An unknown error occurred")}finally{i(!1)}},[e]);return(0,a.useEffect)(()=>{o()},[o]),{data:t,loading:l,error:r,refetch:o}}},5182:(e,t,s)=>{s.d(t,{D:()=>l});var a=s(1663);class l{static async getAll(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[s,a]=e;void 0!==a&&null!==a&&t.append(s,String(a))}),t.has("limit")||t.append("limit","1000");const s=t.toString()?"".concat(this.API_ENDPOINT,"?").concat(t):this.API_ENDPOINT,l=await(0,a.t)(s);return Array.isArray(l)?l:l&&Array.isArray(l.items)?l.items:[]}static async getPaginated(e){var t,s;const l=new URLSearchParams,i=null!==(t=null===e||void 0===e?void 0:e.page)&&void 0!==t?t:1,r=null!==(s=null===e||void 0===e?void 0:e.limit)&&void 0!==s?s:20;l.append("page",String(i)),l.append("limit",String(r));const n=null===e||void 0===e?void 0:e.filters;n&&Object.entries(n).forEach(e=>{let[t,s]=e;void 0!==s&&null!==s&&l.append(t,String(s))});const o="".concat(this.API_ENDPOINT,"?").concat(l.toString());return(0,a.t)(o)}static async getById(e){return(0,a.t)("".concat(this.API_ENDPOINT,"/").concat(e))}static async create(e){return(0,a.t)("".concat(this.API_ENDPOINT),{method:"POST",body:JSON.stringify(e)})}static async update(e,t){return(0,a.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"PATCH",body:JSON.stringify(t)})}static async delete(e){return(0,a.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"DELETE"})}static async getByCompetenciaId(e){return this.getAll({competenciaId:e})}static async getByFaseId(e){return this.getAll({fase:e})}static async getByEstado(e){return this.getAll({estado:e})}static async getProximos(){return this.getByEstado("proximamente")}static async getEnCurso(){return this.getByEstado("en_curso")}static async getFinalizados(){return this.getByEstado("finalizado")}}l.API_ENDPOINT="/partidos"},5402:(e,t,s)=>{s.d(t,{z:()=>l});var a=s(1663);class l{static async getAll(e){const t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[s,a]=e;void 0!==a&&null!==a&&t.append(s,String(a))}),t.has("limit")||t.append("limit","1000");const s=t.toString()?"".concat(this.API_ENDPOINT,"?").concat(t):this.API_ENDPOINT,l=await(0,a.t)(s);return Array.isArray(l)?l:l&&Array.isArray(l.items)?l.items:[]}static async getPaginated(e){var t,s;const l=new URLSearchParams,i=null!==(t=null===e||void 0===e?void 0:e.page)&&void 0!==t?t:1,r=null!==(s=null===e||void 0===e?void 0:e.limit)&&void 0!==s?s:20;l.append("page",String(i)),l.append("limit",String(r));const n=null===e||void 0===e?void 0:e.filters;n&&Object.entries(n).forEach(e=>{let[t,s]=e;void 0!==s&&null!==s&&l.append(t,String(s))});const o="".concat(this.API_ENDPOINT,"?").concat(l.toString());return(0,a.t)(o)}static async getById(e){return(0,a.t)("".concat(this.API_ENDPOINT,"/").concat(e))}static async create(e){return(0,a.t)("".concat(this.API_ENDPOINT),{method:"POST",body:JSON.stringify(e)})}static async update(e,t){return(0,a.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"PATCH",body:JSON.stringify(t)})}static async delete(e){return(0,a.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"DELETE"})}static async getByOrganizacionId(e){return(0,a.t)("".concat(this.API_ENDPOINT,"?organizacionId=").concat(e))}}l.API_ENDPOINT="/equipos"},6677:(e,t,s)=>{s.d(t,{v:()=>l});var a=s(1663);class l{static async getByTemporada(e){return(0,a.t)("".concat(this.API_ENDPOINT,"?temporada=").concat(e))}}l.API_ENDPOINT="/fases"},7691:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(5043),l=s(9379),i=s(579);const r=e=>{let{estadisticas:t}=e;return null!==t&&void 0!==t&&t.mensaje&&"sin-datos-manuales"===t.tipo?(console.log("\u26a0\ufe0f Mostrando mensaje de sin datos manuales"),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Estad\xedsticas del Partido"}),(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center",children:[(0,i.jsx)("div",{className:"text-yellow-600 mb-4",children:(0,i.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,i.jsx)("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"No hay estad\xedsticas manuales"}),(0,i.jsx)("p",{className:"text-yellow-700 mb-4",children:t.mensaje}),(0,i.jsxs)("p",{className:"text-sm text-yellow-600",children:["Haz clic en ",(0,i.jsx)("strong",{children:'"\u26a1 Estad\xedsticas Directas"'})," para capturar estad\xedsticas manuales."]})]})]})):null},n=e=>{let{modoEstadisticasUI:t}=e;const s="automatico"===t?"Resumen General del Partido (Estad\xedsticas Autom\xe1ticas por Set)":"Resumen General del Partido (Estad\xedsticas Manuales Totales)";return(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h3",{className:"text-2xl font-bold text-center",children:s}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("automatico"===t?"bg-blue-100 text-blue-800 border border-blue-200":"bg-green-100 text-green-800 border border-green-200"),children:"automatico"===t?"\ud83d\udcca Autom\xe1tico (por Set)":"\u270f\ufe0f Manual (Totales)"})})]})},o=e=>{var t,s,a,l,r;let{estadisticas:n}=e;const o=null!==(t=n.equipos)&&void 0!==t?t:[],c=o.reduce((e,t)=>{var s,a,l,i;return{throws:e.throws+(null!==(s=t.throws)&&void 0!==s?s:0),hits:e.hits+(null!==(a=t.hits)&&void 0!==a?a:0),outs:e.outs+(null!==(l=t.outs)&&void 0!==l?l:0),catches:e.catches+(null!==(i=t.catches)&&void 0!==i?i:0)}},{throws:0,hits:0,outs:0,catches:0}),u=c.throws>0?(c.hits/c.throws*100).toFixed(1):0;return console.log("\ud83c\udfc6 Datos de equipos para calcular totales:",o),console.log("\ud83c\udfa8 Renderizando tarjetas de estad\xedsticas con totales calculados de equipos:",{totales:c,efectividad:u,equipos:o.length,jugadoresTotales:null!==(s=null===(a=n.jugadores)||void 0===a?void 0:a.length)&&void 0!==s?s:0}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,i.jsx)(d,{title:"Total Lanzamientos",value:c.throws,color:"bg-blue-100 text-blue-800"}),(0,i.jsx)(d,{title:"Total Golpes",value:c.hits,color:"bg-green-100 text-green-800"}),(0,i.jsx)(d,{title:"Total Outs",value:c.outs,color:"bg-red-100 text-red-800"}),(0,i.jsx)(d,{title:"Total Atrapadas",value:c.catches,color:"bg-yellow-100 text-yellow-800"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow text-center",children:[(0,i.jsxs)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[u,"%"]}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Efectividad General"}),(0,i.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"(Golpes/Lanzamientos)"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow text-center",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-indigo-600 mb-2",children:o.length}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Equipos Participantes"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow text-center",children:[(0,i.jsx)("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:null!==(l=null===(r=n.jugadores)||void 0===r?void 0:r.length)&&void 0!==l?l:0}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Jugadores Totales"})]})]})]})};function d(e){let{title:t,value:s,color:a}=e;return(0,i.jsxs)("div",{className:"p-3 rounded-lg ".concat(a),children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:t}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:s})]})}var c=s(1180),u=s(6992),x=s(6102),m=s(7869),h=s(379);const p=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],g=e=>{let{estadisticas:t,modoEstadisticasUI:s}=e;const a=t.equipos||[];if(console.log("\ud83d\udcca Estructura del primer equipo:",a[0]||"Sin equipos"),0===a.length)return(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-center mb-4",children:(0,i.jsxs)("h4",{className:"text-lg font-semibold",children:["Distribuci\xf3n de Lanzamientos por Equipo",(0,i.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("automatico"===s?"bg-blue-100 text-blue-800 border border-blue-200":"bg-green-100 text-green-800 border border-green-200"),children:"automatico"===s?"\ud83d\udcca Auto":"\u270f\ufe0f Manual"})]})}),(0,i.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,i.jsx)("p",{children:"No hay datos de equipos para mostrar en este modo."})})]});const l=a.map((e,t)=>{var s,a;return{name:null!==(s=e.nombre)&&void 0!==s?s:"Equipo",value:null!==(a=e.throws)&&void 0!==a?a:0,fill:p[t%p.length]}});return console.log("\ud83c\udf70 Datos para gr\xe1fico de torta:",l),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-center mb-4",children:(0,i.jsxs)("h4",{className:"text-lg font-semibold",children:["Distribuci\xf3n de Lanzamientos por Equipo",(0,i.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("automatico"===s?"bg-blue-100 text-blue-800 border border-blue-200":"bg-green-100 text-green-800 border border-green-200"),children:"automatico"===s?"\ud83d\udcca Auto":"\u270f\ufe0f Manual"})]})}),(0,i.jsx)(c.u,{width:"100%",height:300,children:(0,i.jsxs)(u.r,{children:[(0,i.jsx)(x.F,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:s}=e;return"".concat(null!==t&&void 0!==t?t:"Equipo"," (").concat((100*(null!==s&&void 0!==s?s:0)).toFixed(0),"%)")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:l.map((e,t)=>(0,i.jsx)(m.f,{fill:e.fill},"cell-".concat(t)))}),(0,i.jsx)(h.m,{})]})})]})},v=e=>{var t;let{estadisticas:s,modoEstadisticasUI:a}=e;const l=null!==(t=null===s||void 0===s?void 0:s.equipos)&&void 0!==t?t:[];return console.log("\ud83c\udfc6 Datos de equipos para tabla:",l),0===l.length?(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-center mb-4",children:(0,i.jsxs)("h4",{className:"text-lg font-semibold",children:["Comparativa R\xe1pida por Equipo",(0,i.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("automatico"===a?"bg-blue-100 text-blue-800 border border-blue-200":"bg-green-100 text-green-800 border border-green-200"),children:"automatico"===a?"\ud83d\udcca Auto":"\u270f\ufe0f Manual"})]})}),(0,i.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,i.jsx)("p",{children:"No hay datos de equipos para mostrar en este modo."})})]}):(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-center mb-4",children:(0,i.jsxs)("h4",{className:"text-lg font-semibold",children:["Comparativa R\xe1pida por Equipo",(0,i.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("automatico"===a?"bg-blue-100 text-blue-800 border border-blue-200":"bg-green-100 text-green-800 border border-green-200"),children:"automatico"===a?"\ud83d\udcca Auto":"\u270f\ufe0f Manual"})]})}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Equipo"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Lanzamientos"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Golpes"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Efectividad"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Jugadores"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>{var t,s,a,l,r,n,o,d,c;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[e.escudo&&(0,i.jsx)("img",{src:e.escudo,alt:"Escudo ".concat(null!==(a=e.nombre)&&void 0!==a?a:"Equipo"),className:"w-8 h-8 object-contain mr-3"}),(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null!==(l=e.nombre)&&void 0!==l?l:"Equipo"})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:null!==(r=e.throws)&&void 0!==r?r:0}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:null!==(n=e.hits)&&void 0!==n?n:0}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center",children:(0,i.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((null!==(o=e.efectividad)&&void 0!==o?o:0)>50?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[null!==(d=e.efectividad)&&void 0!==d?d:0,"%"]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:null!==(c=e.jugadores)&&void 0!==c?c:0})]},null!==(t=null!==(s=e._id)&&void 0!==s?s:e.nombre)&&void 0!==t?t:Math.random())})})]})})]})};var j=s(1474),b=s(7734),N=s(2185),y=s(6026),f=s(95),w=s(3331);function E(e){let{title:t,value:s,color:a}=e;return(0,i.jsxs)("div",{className:"p-3 rounded-lg ".concat(a),children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:t}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:s})]})}const P=async(e,t)=>{const s=await fetch(e,(0,l.A)({headers:(0,l.A)({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers)},t));if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()},A=e=>{var t;let{isOpen:s,onClose:d,partidoId:u,partido:x}=e;const[m,p]=(0,a.useState)({jugadores:[],equipos:[]}),[A,S]=(0,a.useState)(!0),[I,T]=(0,a.useState)("general"),[_,O]=(0,a.useState)(null!==(t=null===x||void 0===x?void 0:x.modoEstadisticas)&&void 0!==t?t:"automatico");(0,a.useEffect)(()=>{s&&q()},[s,_,u]);const q=(0,a.useCallback)(async()=>{try{console.log("\ud83d\udcca Cargando estad\xedsticas en modo ".concat(_,":")),S(!0);let a={jugadores:[],equipos:[]};if("automatico"===_){var e;const t=await(async e=>{const t=await P("/set-partido?partido=".concat(e));return{sets:await Promise.all((t||[]).sort((e,t)=>(e.numeroSet||0)-(t.numeroSet||0)).map(async e=>{const t=(await P("/estadisticas/jugador-set?set=".concat(e._id))||[]).map(e=>{var t,s,a,l;return{_id:e._id,jugadorPartido:e.jugadorPartido,throws:null!==(t=e.throws)&&void 0!==t?t:0,hits:null!==(s=e.hits)&&void 0!==s?s:0,outs:null!==(a=e.outs)&&void 0!==a?a:0,catches:null!==(l=e.catches)&&void 0!==l?l:0}});return{_id:e._id,numeroSet:e.numeroSet,estadoSet:e.estadoSet,ganadorSet:e.ganadorSet,estadisticas:t}}))}})(u);a={jugadores:(null!==(e=t.sets)&&void 0!==e?e:[]).flatMap(e=>{var t;return(null!==(t=e.estadisticas)&&void 0!==t?t:[]).map(t=>(0,l.A)((0,l.A)({},t),{},{fuente:"automatica",setInfo:{numeroSet:e.numeroSet,estadoSet:e.estadoSet,ganadorSet:e.ganadorSet}}))}),equipos:[],setsInfo:t.sets}}else{var t,s;const e=await(async e=>P("/estadisticas/manual?partido=".concat(e)))(u);a={jugadores:(null!==(t=e.jugadores)&&void 0!==t?t:[]).map(e=>(0,l.A)((0,l.A)({},e),{},{fuente:"manual"})),equipos:null!==(s=e.equipos)&&void 0!==s?s:[],mensaje:e.mensaje,tipo:e.tipo}}p(a)}catch(a){console.error("Error cargando estad\xedsticas:",a)}finally{S(!1)}},[_,u]);return s?(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold",children:"Estad\xedsticas del Partido"}),(0,i.jsx)("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{onClick:()=>T("general"),className:"px-4 py-2 rounded ".concat("general"===I?"bg-blue-500 text-white":"bg-gray-200"),children:"General"}),(0,i.jsx)("button",{onClick:()=>T("equipos"),className:"px-4 py-2 rounded ".concat("equipos"===I?"bg-blue-500 text-white":"bg-gray-200"),children:"Por Equipos"}),(0,i.jsx)("button",{onClick:()=>T("jugadores"),className:"px-4 py-2 rounded ".concat("jugadores"===I?"bg-blue-500 text-white":"bg-gray-200"),children:"Por Jugadores"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"radio",name:"modo",checked:"automatico"===_,onChange:()=>O("automatico"),className:"mr-2"}),"Autom\xe1tico"]}),(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"radio",name:"modo",checked:"manual"===_,onChange:()=>O("manual"),className:"mr-2"}),"Manual"]})]})]}),(0,i.jsx)("div",{className:"overflow-y-auto max-h-[60vh]",children:(()=>{if(A)return(0,i.jsx)("div",{className:"text-center py-8",children:"Cargando estad\xedsticas..."});switch(I){case"general":return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"automatico";return e.mensaje&&"sin-datos-manuales"===e.tipo?(0,i.jsx)(r,{estadisticas:e}):(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsx)(n,{modoEstadisticasUI:s}),(0,i.jsx)(o,{estadisticas:e}),(0,i.jsx)(g,{estadisticas:e,modoEstadisticasUI:s}),(0,i.jsx)(v,{estadisticas:e,modoEstadisticasUI:s})]})}(m,x,_);case"equipos":return function(e){return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold",children:"Estad\xedsticas por Equipo"}),(t=>{const s=null!==(t=e.equipos)&&void 0!==t?t:[];return s.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:s.map(t=>{var s,a,l,r,n,o,d,c,u,x,m;return(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[t.escudo&&(0,i.jsx)("img",{src:t.escudo,alt:"Escudo ".concat(null!==(l=t.nombre)&&void 0!==l?l:"Equipo"),className:"w-12 h-12 object-contain"}),(0,i.jsx)("h4",{className:"text-lg font-bold",children:null!==(r=t.nombre)&&void 0!==r?r:"Equipo"}),(0,i.jsxs)("span",{className:"text-sm text-gray-500 ml-auto",children:[null!==(n=t.jugadores)&&void 0!==n?n:0," jugador",1===t.jugadores?"":"es"]}),null!==(o=e.jugadores)&&void 0!==o&&o.length?(t=>{const s=[...new Set((null!==(t=e.jugadores)&&void 0!==t?t:[]).map(e=>e.fuente).filter(Boolean))];if(1===s.length){const e=s[0];return(0,i.jsx)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-2 ".concat("string"===typeof e&&e.includes("manual")?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"string"===typeof e&&e.includes("manual")?"\u270f\ufe0f Manual":"\ud83e\udd16 Autom\xe1tica"})}return s.length>1?(0,i.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-2 bg-purple-100 text-purple-800",children:["\ud83d\udd04 Combinadas (",s.length," fuentes)"]}):null})():null]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsx)(E,{title:"Lanzamientos",value:null!==(d=t.throws)&&void 0!==d?d:0,color:"bg-blue-100 text-blue-800"}),(0,i.jsx)(E,{title:"Golpes",value:null!==(c=t.hits)&&void 0!==c?c:0,color:"bg-green-100 text-green-800"}),(0,i.jsx)(E,{title:"Outs",value:null!==(u=t.outs)&&void 0!==u?u:0,color:"bg-red-100 text-red-800"}),(0,i.jsx)(E,{title:"Atrapadas",value:null!==(x=t.catches)&&void 0!==x?x:0,color:"bg-yellow-100 text-yellow-800"}),(0,i.jsx)("div",{className:"col-span-2",children:(0,i.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Efectividad"}),(0,i.jsxs)("div",{className:"text-xl font-bold",children:[null!==(m=t.efectividad)&&void 0!==m?m:0,"%"]})]})})]})]},null!==(s=null!==(a=t._id)&&void 0!==a?a:t.nombre)&&void 0!==s?s:Math.random())})}),(0,i.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Comparativa de Equipos"}),(0,i.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-8",children:(0,i.jsx)(c.u,{width:"100%",height:400,children:(0,i.jsxs)(j.E,{data:s,margin:{top:20,right:30,left:20,bottom:5},children:[(0,i.jsx)(b.d,{strokeDasharray:"3 3"}),(0,i.jsx)(N.W,{dataKey:"nombre"}),(0,i.jsx)(y.h,{}),(0,i.jsx)(h.m,{}),(0,i.jsx)(f.s,{}),(0,i.jsx)(w.y,{dataKey:"throws",name:"Lanzamientos",fill:"#3b82f6"}),(0,i.jsx)(w.y,{dataKey:"hits",name:"Golpes",fill:"#10b981"}),(0,i.jsx)(w.y,{dataKey:"outs",name:"Outs",fill:"#ef4444"}),(0,i.jsx)(w.y,{dataKey:"catches",name:"Atrapadas",fill:"#f59e0b"})]})})})]}):(0,i.jsx)("p",{className:"text-gray-600",children:"No hay estad\xedsticas de equipos disponibles a\xfan"})})()]})}(m);case"jugadores":return(e=>{var t,s,a;return console.log("\ud83c\udfbe renderEstadisticasJugadores recibi\xf3:",{jugadoresLength:(null===(t=e.jugadores)||void 0===t?void 0:t.length)||0,tieneJugadores:!!e.jugadores,primerJugador:(null===(s=e.jugadores)||void 0===s?void 0:s[0])||"Sin jugadores"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Estad\xedsticas por Jugador"}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full bg-white rounded-lg overflow-hidden",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jugador"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Equipo"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Lanz."}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Golpes"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Outs"}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Atrap."}),(0,i.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Efect."})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200",children:null!==(a=e.jugadores)&&void 0!==a&&a.length?e.jugadores.map(e=>{var t,s,a,l,r,n,o,d,c,u;const x=null!==(t=e.throws)&&void 0!==t?t:0,m=null!==(s=e.hits)&&void 0!==s?s:0,h=null!==(a=e.outs)&&void 0!==a?a:0,p=null!==(l=e.catches)&&void 0!==l?l:0,g=x>0?m/x*100:0,v=g.toFixed(1),j="object"===typeof e.jugadorPartido?null===(r=e.jugadorPartido)||void 0===r?void 0:r.jugador:void 0,b="object"===typeof e.jugadorPartido?null===(n=e.jugadorPartido)||void 0===n?void 0:n.equipo:void 0,N="string"===typeof b?b:null===b||void 0===b?void 0:b.nombre;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null!==(c=null===j||void 0===j?void 0:j.nombre)&&void 0!==c?c:"Sin nombre"," ",null!==(u=null===j||void 0===j?void 0:j.apellido)&&void 0!==u?u:""]})})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:null!==N&&void 0!==N?N:"Sin equipo"}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:x}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:m}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:h}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:p}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center",children:(0,i.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full\n                      ".concat(g>50?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:[v,"%"]})})]},null!==(o=e._id)&&void 0!==o?o:"".concat(null!==(d=e.jugadorPartido)&&void 0!==d?d:""))}):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No hay estad\xedsticas de jugadores disponibles a\xfan"})})})]})})]})})(m);default:return null}})()})]})]})}):null};var S=s(871),I=s(3207),T=s(5182),_=s(38),O=s(7777),q=s(6677),C=s(5402),D=s(468);const k=()=>{const[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[x,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)([]),[j,b]=(0,a.useState)([]),[N,y]=(0,a.useState)([]),[f,w]=(0,a.useState)([]);(0,a.useEffect)(()=>{_.O.getAll().then(v).catch(console.error),C.z.getAll().then(w).catch(console.error)},[]),(0,a.useEffect)(()=>{if(!e)return b([]),void l("");O.H.getByCompetencia(e).then(b).catch(console.error)},[e]),(0,a.useEffect)(()=>{if(!s)return y([]),void n("");q.v.getByTemporada(s).then(y).catch(console.error)},[s]);(0,a.useCallback)(()=>{const t={};return e&&(t.competencia=e),s&&(t.temporada=s),r&&(t.fase=r),o&&(t.equipo=o),c&&(t.fecha=c),x&&(t.estado=x),h&&(t.tipo="amistoso"),T.D.getAll(t)},[e,s,r,o,c,x,h]);const[E,P]=(0,a.useState)(1),[k,z]=(0,a.useState)(20),M=(0,a.useCallback)(()=>T.D.getPaginated({page:E,limit:k,filters:{competencia:e||void 0,temporada:s||void 0,fase:r||void 0,equipo:o||void 0,fecha:c||void 0,estado:x||void 0,tipo:h?"amistoso":void 0}}),[E,k,e,s,r,o,c,x,h]),{data:B,loading:L,error:J,refetch:F}=(0,I.t)(M),G=(0,a.useMemo)(()=>{if(!B)return[];let e=[];if(Array.isArray(B)){const t=(E-1)*k;e=B.slice(t,t+k)}else{var t;e=null!==(t=B.items)&&void 0!==t?t:[]}return e},[B,E,k]),R=(0,a.useMemo)(()=>{var e;return B?Array.isArray(B)?B.length:null!==(e=B.total)&&void 0!==e?e:G.length:0},[B,G.length]),U=(0,a.useMemo)(()=>k>0?Math.max(1,Math.ceil(R/k)):1,[R,k]),[H,K]=(0,a.useState)(null),[V,W]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"min-h-screen bg-slate-50 py-8",children:[(0,i.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Partidos"}),(0,i.jsx)("p",{className:"mt-2 text-slate-600",children:"Calendario de partidos y resultados"})]}),(0,i.jsx)("div",{className:"mb-8 rounded-xl bg-white p-4 shadow-sm border border-slate-200",children:(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:[(0,i.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"rounded-lg border-slate-300 text-sm",children:[(0,i.jsx)("option",{value:"",children:"Todas las competencias"}),g.map(e=>(0,i.jsx)("option",{value:e.id||e._id,children:e.nombre},e.id||e._id||Math.random()))]}),(0,i.jsxs)("select",{value:s,onChange:e=>l(e.target.value),disabled:!e,className:"rounded-lg border-slate-300 text-sm disabled:bg-slate-100",children:[(0,i.jsx)("option",{value:"",children:"Todas las temporadas"}),j.map(e=>(0,i.jsx)("option",{value:e._id,children:e.nombre},e._id||Math.random()))]}),(0,i.jsxs)("select",{value:r,onChange:e=>n(e.target.value),disabled:!s,className:"rounded-lg border-slate-300 text-sm disabled:bg-slate-100",children:[(0,i.jsx)("option",{value:"",children:"Todas las fases"}),N.map(e=>(0,i.jsx)("option",{value:e._id,children:e.nombre},e._id||Math.random()))]}),(0,i.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"rounded-lg border-slate-300 text-sm",children:[(0,i.jsx)("option",{value:"",children:"Todos los equipos"}),f.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id||Math.random()))]}),(0,i.jsx)("input",{type:"date",value:c,onChange:e=>u(e.target.value),className:"rounded-lg border-slate-300 text-sm"}),(0,i.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"rounded-lg border-slate-300 text-sm",children:[(0,i.jsx)("option",{value:"",children:"Todos los estados"}),(0,i.jsx)("option",{value:"programado",children:"Programado"}),(0,i.jsx)("option",{value:"en_juego",children:"En Juego"}),(0,i.jsx)("option",{value:"finalizado",children:"Finalizado"})]}),(0,i.jsxs)("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,i.jsx)("input",{type:"checkbox",checked:h,onChange:e=>p(e.target.checked),className:"rounded border-slate-300"}),"Solo Amistosos"]})]})}),r&&(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"mb-4 text-xl font-semibold text-slate-900",children:"Tabla de Posiciones"}),(0,i.jsx)("div",{className:"rounded-xl bg-white p-4 shadow-sm border border-slate-200 overflow-x-auto",children:(0,i.jsx)(D.P,{faseId:r})})]}),L?(0,i.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"mb-4 h-8 w-8 animate-spin rounded-full border-4 border-slate-300 border-t-slate-600 mx-auto"}),(0,i.jsx)("p",{className:"text-slate-600",children:"Cargando partidos..."})]})}):J?(0,i.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsxs)("p",{className:"text-red-600 mb-4",children:["Error al cargar partidos: ",J]}),(0,i.jsx)("button",{onClick:F,className:"rounded-lg bg-slate-600 px-4 py-2 text-white hover:bg-slate-700",children:"Reintentar"})]})}):G&&G.length>0?(0,i.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:G.map(e=>(0,i.jsx)(S.A,{partido:e,variante:"finalizado"===e.estado?"resultado":"proximo",actions:e.sets&&e.sets.length>0?(0,i.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{K(e),W(!0)})(e)},className:"rounded-lg bg-slate-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-slate-700 transition-colors",children:"\ud83d\udcca Stats"}):null},e._id||e.id))}):(0,i.jsx)("div",{className:"text-center py-12",children:(0,i.jsx)("p",{className:"text-slate-500",children:"No hay partidos disponibles con estos filtros"})}),(0,i.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-sm text-slate-600",children:"Mostrar"}),(0,i.jsxs)("select",{value:k,onChange:e=>{P(1),z(parseInt(e.target.value))},className:"rounded-lg border border-slate-300 text-sm px-2 py-1",children:[(0,i.jsx)("option",{value:12,children:"12"}),(0,i.jsx)("option",{value:20,children:"20"}),(0,i.jsx)("option",{value:36,children:"36"}),(0,i.jsx)("option",{value:44,children:"44"})]}),(0,i.jsx)("span",{className:"text-sm text-slate-600",children:"por p\xe1gina"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{onClick:()=>P(e=>Math.max(1,e-1)),disabled:E<=1,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-sm text-slate-700 disabled:opacity-50",children:"\u2190 Anterior"}),(0,i.jsxs)("span",{className:"text-sm text-slate-700",children:["P\xe1gina ",E," de ",U]}),(0,i.jsx)("button",{onClick:()=>P(e=>Math.min(U,e+1)),disabled:E>=U,className:"rounded-lg border border-slate-300 px-3 py-1.5 text-sm text-slate-700 disabled:opacity-50",children:"Siguiente \u2192"})]})]})]}),H&&(0,i.jsx)(A,{isOpen:V,onClose:()=>{W(!1),K(null)},partidoId:H._id||H.id||"",partido:{_id:H._id||H.id||"",modoEstadisticas:H.modoEstadisticas,modoVisualizacion:H.modoVisualizacion}})]})}},7777:(e,t,s)=>{s.d(t,{H:()=>l});var a=s(1663);class l{static async getByCompetencia(e){return(0,a.t)("".concat(this.API_ENDPOINT,"?competencia=").concat(e))}}l.API_ENDPOINT="/temporadas"}}]);
//# sourceMappingURL=691.c963a3ef.chunk.js.map