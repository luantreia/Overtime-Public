"use strict";(self.webpackChunkovertime_publicpage_actualizadots=self.webpackChunkovertime_publicpage_actualizadots||[]).push([[368],{5368:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var r=a(9379),s=a(5043),i=a(5475),d=a(5296),o=a(4127),l=a(8627),n=a(3986);const c=["title","titleId"];function u(e,t){let{title:a,titleId:r}=e,i=(0,n.A)(e,c);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const x=s.forwardRef(u),m=["title","titleId"];function p(e,t){let{title:a,titleId:r}=e,i=(0,n.A)(e,m);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const g=s.forwardRef(p),h=["title","titleId"];function j(e,t){let{title:a,titleId:r}=e,i=(0,n.A)(e,h);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const f=s.forwardRef(j),v=["title","titleId"];function y(e,t){let{title:a,titleId:r}=e,i=(0,n.A)(e,v);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const N=s.forwardRef(y);var b=a(579);const w={pendiente:{bg:"bg-yellow-50",text:"text-yellow-700",icon:(0,b.jsx)(x,{className:"h-5 w-5"})},aceptado:{bg:"bg-green-50",text:"text-green-700",icon:(0,b.jsx)(g,{className:"h-5 w-5"})},rechazado:{bg:"bg-red-50",text:"text-red-700",icon:(0,b.jsx)(f,{className:"h-5 w-5"})},cancelado:{bg:"bg-gray-50",text:"text-gray-700",icon:(0,b.jsx)(f,{className:"h-5 w-5"})}},E={"usuario-crear-jugador":"Crear Jugador","usuario-crear-equipo":"Crear Equipo","usuario-crear-organizacion":"Crear Organizaci\xf3n","usuario-solicitar-admin-jugador":"Solicitar Admin de Jugador","usuario-solicitar-admin-equipo":"Solicitar Admin de Equipo","usuario-solicitar-admin-organizacion":"Solicitar Admin de Organizaci\xf3n","jugador-equipo-crear":"Contrato Jugador-Equipo (crear)","jugador-equipo-eliminar":"Contrato Jugador-Equipo (eliminar)","jugador-equipo-editar":"Contrato Jugador-Equipo (editar)","participacion-temporada-crear":"Participaci\xf3n Temporada (crear)","participacion-temporada-actualizar":"Participaci\xf3n Temporada (actualizar)","participacion-temporada-eliminar":"Participaci\xf3n Temporada (eliminar)","jugador-temporada-crear":"Participaci\xf3n Jugador-Temporada (crear)","jugador-temporada-actualizar":"Participaci\xf3n Jugador-Temporada (actualizar)","jugador-temporada-eliminar":"Participaci\xf3n Jugador-Temporada (eliminar)",resultadoPartido:"Resultado Partido",resultadoSet:"Resultado Set",estadisticasJugadorSet:"Estad\xedsticas Jugador Set",estadisticasJugadorPartido:"Estad\xedsticas Jugador Partido",estadisticasEquipoPartido:"Estad\xedsticas Equipo Partido",estadisticasEquipoSet:"Estad\xedsticas Equipo Set"},k=e=>{var t;return null!==(t=E[e])&&void 0!==t?t:e},z=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})};function S(){const{addToast:e}=(0,o.dj)(),{user:t}=(0,l.A)(),[a,n]=(0,i.ok)(),[c,u]=(0,s.useState)(!0),[m,p]=(0,s.useState)(null),[h,j]=(0,s.useState)([]),[v,y]=(0,s.useState)({}),[E,S]=(0,s.useState)(a.get("estado")||"todos"),P=(0,s.useCallback)(async()=>{if(null!==t&&void 0!==t&&t.id)try{u(!0),p(null);const e={creadoPor:t.id};"todos"!==E&&(e.estado=E);const a=await(0,d.ov)(e);j(a.solicitudes.map(e=>(0,r.A)((0,r.A)({},e),{},{id:e._id})))}catch(a){p((null===a||void 0===a?void 0:a.message)||"Error al cargar solicitudes"),e({title:"Error",message:(null===a||void 0===a?void 0:a.message)||"Error al cargar solicitudes",type:"error"})}finally{u(!1)}},[null===t||void 0===t?void 0:t.id,E,e]);(0,s.useEffect)(()=>{P()},[P]),(0,s.useEffect)(()=>{const e=new URLSearchParams;"todos"!==E&&e.set("estado",E),n(e,{replace:!0})},[E,n]);const C={pendiente:h.filter(e=>"pendiente"===e.estado).length,aceptado:h.filter(e=>"aceptado"===e.estado).length,rechazado:h.filter(e=>"rechazado"===e.estado).length},A="todos"===E?h:h.filter(e=>e.estado===E);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Solicitudes"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Visualiza el estado de todas tus solicitudes de edici\xf3n"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,b.jsx)("div",{className:"rounded-lg bg-yellow-50 p-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(x,{className:"h-6 w-6 text-yellow-600"}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-yellow-600",children:"Pendientes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-900",children:C.pendiente})]})]})}),(0,b.jsx)("div",{className:"rounded-lg bg-green-50 p-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(g,{className:"h-6 w-6 text-green-600"}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Aceptadas"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-900",children:C.aceptado})]})]})}),(0,b.jsx)("div",{className:"rounded-lg bg-red-50 p-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(f,{className:"h-6 w-6 text-red-600"}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-red-600",children:"Rechazadas"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-900",children:C.rechazado})]})]})})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("select",{value:E,onChange:e=>S(e.target.value),className:"rounded border border-gray-300 bg-white px-3 py-2 text-sm text-gray-700 focus:border-blue-500 focus:outline-none",children:[(0,b.jsx)("option",{value:"todos",children:"Todos los estados"}),(0,b.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,b.jsx)("option",{value:"aceptado",children:"Aceptado"}),(0,b.jsx)("option",{value:"rechazado",children:"Rechazado"}),(0,b.jsx)("option",{value:"cancelado",children:"Cancelado"})]})}),c&&(0,b.jsx)("div",{className:"flex justify-center py-12",children:(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600"})}),m&&(0,b.jsx)("div",{className:"rounded-lg bg-red-50 p-4 text-red-700",children:m}),!c&&0===A.length&&(0,b.jsx)("div",{className:"rounded-lg border border-dashed border-gray-300 py-12 text-center",children:(0,b.jsx)("p",{className:"text-gray-600",children:0===h.length?"No tienes solicitudes a\xfan":"No hay solicitudes ".concat("todos"!==E?"con este estado":"")})}),!c&&A.length>0&&(0,b.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:(0,b.jsxs)("table",{className:"w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700",children:"Tipo"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700",children:"Estado"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700",children:"Fecha Creaci\xf3n"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700",children:"Acciones"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:A.map(e=>{const t=v[e._id],a=w[e.estado];return(0,b.jsxs)(s.Fragment,{children:[(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:k(e.tipo)}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full px-3 py-1 ".concat(a.bg),children:[a.icon,(0,b.jsx)("span",{className:"font-medium capitalize ".concat(a.text),children:e.estado})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:z(e.createdAt)}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,b.jsxs)("button",{onClick:()=>{return t=e._id,void y(e=>(0,r.A)((0,r.A)({},e),{},{[t]:!e[t]}));var t},className:"inline-flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-gray-700 hover:bg-gray-200",children:[(0,b.jsx)(N,{className:"h-4 w-4 transform transition-transform ".concat(t?"rotate-180":"")}),"Detalles"]})})]}),t&&(0,b.jsx)("tr",{className:"bg-gray-50",children:(0,b.jsx)("td",{colSpan:4,className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium uppercase text-gray-600",children:"Datos Propuestos:"}),(0,b.jsx)("pre",{className:"mt-1 max-h-64 overflow-auto rounded bg-white p-2 text-xs text-gray-700",children:JSON.stringify(e.datosPropuestos,null,2)})]}),e.motivoRechazo&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium uppercase text-red-600",children:"Motivo del Rechazo:"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-red-700",children:e.motivoRechazo})]})]})})})]},e._id)})})]})})]})}}}]);
//# sourceMappingURL=368.cd8eb276.chunk.js.map