{"version":3,"file":"static/js/67.0530aff7.chunk.js","mappings":"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","sources":["features/competencias/services/competenciaService.ts","shared/hooks/useEntity.ts","features/competencias/services/organizacionService.ts","features/competencias/pages/Competencias.tsx"],"sourcesContent":["import { fetchWithAuth } from '../../../utils/apiClient';\r\n\r\nexport interface Competencia {\r\n  id: string;\r\n  nombre: string;\r\n  descripcion?: string;\r\n  fechaInicio?: string;\r\n  fechaFin?: string;\r\n  estado?: 'proximamente' | 'en_curso' | 'finalizada';\r\n  imagen?: string;\r\n  equipos?: number;\r\n  [key: string]: any;\r\n}\r\n\r\nexport class CompetenciaService {\r\n  private static readonly API_ENDPOINT = '/competencias';\r\n\r\n  static async getAll(filters?: Record<string, any>): Promise<Competencia[]> {\r\n    const queryParams = new URLSearchParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined && value !== null) {\r\n          queryParams.append(key, String(value));\r\n        }\r\n      });\r\n    }\r\n\r\n    const url = queryParams.toString() ? `${this.API_ENDPOINT}?${queryParams}` : this.API_ENDPOINT;\r\n    const data = await fetchWithAuth<any[]>(url);\r\n    return data.map(item => ({ ...item, id: item._id || item.id }));\r\n  }\r\n\r\n  static async getById(id: string): Promise<Competencia> {\r\n    const data = await fetchWithAuth<any>(`${this.API_ENDPOINT}/${id}`);\r\n    return { ...data, id: data._id || data.id };\r\n  }\r\n\r\n  static async create(data: Omit<Competencia, 'id'>): Promise<Competencia> {\r\n    return fetchWithAuth<Competencia>(`${this.API_ENDPOINT}`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  static async update(id: string, data: Partial<Competencia>): Promise<Competencia> {\r\n    return fetchWithAuth<Competencia>(`${this.API_ENDPOINT}/${id}`, {\r\n      method: 'PATCH',\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  static async delete(id: string): Promise<void> {\r\n    return fetchWithAuth<void>(`${this.API_ENDPOINT}/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  static async getByEstado(estado: string): Promise<Competencia[]> {\r\n    return fetchWithAuth<Competencia[]>(`${this.API_ENDPOINT}?estado=${estado}`);\r\n  }\r\n\r\n  static async getActivas(): Promise<Competencia[]> {\r\n    return this.getByEstado('en_curso');\r\n  }\r\n\r\n  static async getProximas(): Promise<Competencia[]> {\r\n    return this.getByEstado('proximamente');\r\n  }\r\n}\r\n","import { useState, useEffect, useCallback } from 'react';\n\nexport function useEntity<T>(fetchFn: () => Promise<T>) {\n  const [data, setData] = useState<T>();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const result = await fetchFn();\n      setData(result);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An unknown error occurred');\n    } finally {\n      setLoading(false);\n    }\n  }, [fetchFn]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return { data, loading, error, refetch: fetchData };\n}\n","import { fetchWithAuth } from '../../../utils/apiClient';\r\n\r\nexport interface Organizacion {\r\n  id: string;\r\n  nombre: string;\r\n  logoUrl?: string;\r\n  responsables?: string[];\r\n  descripcion?: string;\r\n}\r\n\r\nexport class OrganizacionService {\r\n  private static readonly API_ENDPOINT = '/organizaciones';\r\n\r\n  static async getAll(): Promise<Organizacion[]> {\r\n    const data = await fetchWithAuth<any[]>(this.API_ENDPOINT);\r\n    return data.map(item => ({ ...item, id: item._id || item.id }));\r\n  }\r\n\r\n  static async getById(id: string): Promise<Organizacion> {\r\n    const data = await fetchWithAuth<any>(`${this.API_ENDPOINT}/${id}`);\r\n    return { ...data, id: data._id || data.id };\r\n  }\r\n}","import React, { useCallback, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { CompetenciaCard } from '../../../shared/components';\nimport { OrganizacionCard } from '../../../shared/components';\nimport { useEntity } from '../../../shared/hooks';\nimport { CompetenciaService, type Competencia } from '../services/competenciaService';\nimport { OrganizacionService, type Organizacion } from '../services/organizacionService';\n\n// Mapear estados del backend a variantes conocidas\nconst mapEstadoVariante = (estado: any): 'proximamente' | 'en_curso' | 'finalizada' => {\n  if (!estado) return 'proximamente';\n  \n  const estadoStr = String(estado).toLowerCase().trim();\n  \n  if (estadoStr.includes('en_curso') || estadoStr.includes('en curso') || estadoStr.includes('activa') || estadoStr.includes('en') && estadoStr.includes('curso')) {\n    return 'en_curso';\n  }\n  if (estadoStr.includes('finalizada') || estadoStr.includes('finalizado') || estadoStr.includes('terminada') || estadoStr.includes('completada')) {\n    return 'finalizada';\n  }\n  \n  return 'proximamente';\n};\n\nconst Competencias: React.FC = () => {\n  const navigate = useNavigate();\n  const [selectedOrganizacion, setSelectedOrganizacion] = useState<Organizacion | null>(null);\n\n  const { data: entidades, loading, error, refetch } = useEntity<Organizacion[] | Competencia[]>(\n    useCallback(() => {\n      if (selectedOrganizacion) {\n        return CompetenciaService.getAll();\n      } else {\n        return OrganizacionService.getAll();\n      }\n    }, [selectedOrganizacion])\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"mb-4 h-8 w-8 animate-spin rounded-full border-4 border-brand-200 border-t-brand-600 mx-auto\"></div>\n          <p className=\"text-slate-600\">\n            {selectedOrganizacion ? 'Cargando competencias...' : 'Cargando organizaciones...'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"mb-4 text-red-600\">\n            Error al cargar {selectedOrganizacion ? 'competencias' : 'organizaciones'}: {error}\n          </p>\n          <button\n            onClick={refetch}\n            className=\"rounded-lg bg-brand-600 px-4 py-2 text-white hover:bg-brand-700\"\n          >\n            Reintentar\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 py-8\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-8\">\n          {selectedOrganizacion && (\n            <button\n              onClick={() => setSelectedOrganizacion(null)}\n              className=\"mb-4 rounded-lg bg-slate-200 px-4 py-2 text-slate-700 hover:bg-slate-300\"\n            >\n              ← Volver a organizaciones\n            </button>\n          )}\n          <h1 className=\"text-3xl font-bold text-slate-900\">\n            {selectedOrganizacion ? `Competencias de ${selectedOrganizacion.nombre}` : 'Organizaciones'}\n          </h1>\n          <p className=\"mt-2 text-slate-600\">\n            {selectedOrganizacion ? 'Directorio de competencias de la organización' : 'Selecciona una organización para ver sus competencias'}\n          </p>\n        </div>\n\n        {!entidades || entidades.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <p className=\"text-slate-500\">\n              {selectedOrganizacion ? 'No hay competencias disponibles para esta organización' : 'No hay organizaciones disponibles'}\n            </p>\n          </div>\n        ) : selectedOrganizacion ? (\n          <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n            {(entidades as Competencia[]).filter(c => c.organizacion?._id === selectedOrganizacion.id).map((competencia) => (\n              <CompetenciaCard\n                key={competencia.id}\n                competencia={competencia}\n                variante={mapEstadoVariante(competencia.estado)}\n                onClick={() => navigate(`/competencias/${competencia.id}`)}\n                actions={\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      navigate(`/competencias/${competencia.id}`);\n                    }}\n                    className=\"rounded-lg bg-brand-600 px-3 py-1.5 text-sm text-white hover:bg-brand-700\"\n                  >\n                    Ver detalles\n                  </button>\n                }\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n            {(entidades as Organizacion[]).map((organizacion) => (\n              <OrganizacionCard\n                key={organizacion.id}\n                organizacion={organizacion}\n                onClick={() => setSelectedOrganizacion(organizacion)}\n                actions={\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setSelectedOrganizacion(organizacion);\n                    }}\n                    className=\"rounded-lg bg-brand-600 px-3 py-1.5 text-sm text-white hover:bg-brand-700\"\n                  >\n                    Ver competencias\n                  </button>\n                }\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Competencias;\n"],"names":["CompetenciaService","getAll","filters","queryParams","URLSearchParams","Object","entries","forEach","_ref","key","value","undefined","append","String","url","toString","concat","this","API_ENDPOINT","fetchWithAuth","map","item","_objectSpread","id","_id","getById","data","create","method","body","JSON","stringify","update","delete","getByEstado","estado","getActivas","getProximas","useEntity","fetchFn","setData","useState","loading","setLoading","error","setError","fetchData","useCallback","async","result","err","Error","message","useEffect","refetch","OrganizacionService","mapEstadoVariante","estadoStr","toLowerCase","trim","includes","Competencias","navigate","useNavigate","selectedOrganizacion","setSelectedOrganizacion","entidades","_jsx","className","children","_jsxs","onClick","nombre","length","filter","c","_c$organizacion","organizacion","competencia","CompetenciaCard","variante","actions","e","stopPropagation","OrganizacionCard"],"sourceRoot":""}