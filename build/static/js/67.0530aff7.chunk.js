"use strict";(self.webpackChunkovertime_publicpage_actualizadots=self.webpackChunkovertime_publicpage_actualizadots||[]).push([[67],{38:(e,a,t)=>{t.d(a,{O:()=>c});var s=t(9379),n=t(1663);class c{static async getAll(e){const a=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[t,s]=e;void 0!==s&&null!==s&&a.append(t,String(s))});const t=a.toString()?"".concat(this.API_ENDPOINT,"?").concat(a):this.API_ENDPOINT;return(await(0,n.t)(t)).map(e=>(0,s.A)((0,s.A)({},e),{},{id:e._id||e.id}))}static async getById(e){const a=await(0,n.t)("".concat(this.API_ENDPOINT,"/").concat(e));return(0,s.A)((0,s.A)({},a),{},{id:a._id||a.id})}static async create(e){return(0,n.t)("".concat(this.API_ENDPOINT),{method:"POST",body:JSON.stringify(e)})}static async update(e,a){return(0,n.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"PATCH",body:JSON.stringify(a)})}static async delete(e){return(0,n.t)("".concat(this.API_ENDPOINT,"/").concat(e),{method:"DELETE"})}static async getByEstado(e){return(0,n.t)("".concat(this.API_ENDPOINT,"?estado=").concat(e))}static async getActivas(){return this.getByEstado("en_curso")}static async getProximas(){return this.getByEstado("proximamente")}}c.API_ENDPOINT="/competencias"},3207:(e,a,t)=>{t.d(a,{t:()=>n});var s=t(5043);function n(e){const[a,t]=(0,s.useState)(),[n,c]=(0,s.useState)(!0),[i,r]=(0,s.useState)(null),o=(0,s.useCallback)(async()=>{c(!0),r(null);try{const a=await e();t(a)}catch(a){r(a instanceof Error?a.message:"An unknown error occurred")}finally{c(!1)}},[e]);return(0,s.useEffect)(()=>{o()},[o]),{data:a,loading:n,error:i,refetch:o}}},4067:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var s=t(5043),n=t(3216),c=t(9441),i=t(3207),r=t(38),o=t(9379),l=t(1663);class d{static async getAll(){return(await(0,l.t)(this.API_ENDPOINT)).map(e=>(0,o.A)((0,o.A)({},e),{},{id:e._id||e.id}))}static async getById(e){const a=await(0,l.t)("".concat(this.API_ENDPOINT,"/").concat(e));return(0,o.A)((0,o.A)({},a),{},{id:a._id||a.id})}}d.API_ENDPOINT="/organizaciones";var m=t(579);const u=e=>{if(!e)return"proximamente";const a=String(e).toLowerCase().trim();return a.includes("en_curso")||a.includes("en curso")||a.includes("activa")||a.includes("en")&&a.includes("curso")?"en_curso":a.includes("finalizada")||a.includes("finalizado")||a.includes("terminada")||a.includes("completada")?"finalizada":"proximamente"},g=()=>{const e=(0,n.Zp)(),[a,t]=(0,s.useState)(null),{data:o,loading:l,error:g,refetch:p}=(0,i.t)((0,s.useCallback)(()=>a?r.O.getAll():d.getAll(),[a]));return l?(0,m.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"mb-4 h-8 w-8 animate-spin rounded-full border-4 border-brand-200 border-t-brand-600 mx-auto"}),(0,m.jsx)("p",{className:"text-slate-600",children:a?"Cargando competencias...":"Cargando organizaciones..."})]})}):g?(0,m.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("p",{className:"mb-4 text-red-600",children:["Error al cargar ",a?"competencias":"organizaciones",": ",g]}),(0,m.jsx)("button",{onClick:p,className:"rounded-lg bg-brand-600 px-4 py-2 text-white hover:bg-brand-700",children:"Reintentar"})]})}):(0,m.jsx)("div",{className:"min-h-screen bg-slate-50 py-8",children:(0,m.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,m.jsxs)("div",{className:"mb-8",children:[a&&(0,m.jsx)("button",{onClick:()=>t(null),className:"mb-4 rounded-lg bg-slate-200 px-4 py-2 text-slate-700 hover:bg-slate-300",children:"\u2190 Volver a organizaciones"}),(0,m.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:a?"Competencias de ".concat(a.nombre):"Organizaciones"}),(0,m.jsx)("p",{className:"mt-2 text-slate-600",children:a?"Directorio de competencias de la organizaci\xf3n":"Selecciona una organizaci\xf3n para ver sus competencias"})]}),o&&0!==o.length?a?(0,m.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:o.filter(e=>{var t;return(null===(t=e.organizacion)||void 0===t?void 0:t._id)===a.id}).map(a=>(0,m.jsx)(c.HZ,{competencia:a,variante:u(a.estado),onClick:()=>e("/competencias/".concat(a.id)),actions:(0,m.jsx)("button",{onClick:t=>{t.stopPropagation(),e("/competencias/".concat(a.id))},className:"rounded-lg bg-brand-600 px-3 py-1.5 text-sm text-white hover:bg-brand-700",children:"Ver detalles"})},a.id))}):(0,m.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:o.map(e=>(0,m.jsx)(c.Pm,{organizacion:e,onClick:()=>t(e),actions:(0,m.jsx)("button",{onClick:a=>{a.stopPropagation(),t(e)},className:"rounded-lg bg-brand-600 px-3 py-1.5 text-sm text-white hover:bg-brand-700",children:"Ver competencias"})},e.id))}):(0,m.jsx)("div",{className:"text-center py-12",children:(0,m.jsx)("p",{className:"text-slate-500",children:a?"No hay competencias disponibles para esta organizaci\xf3n":"No hay organizaciones disponibles"})})]})})}}}]);
//# sourceMappingURL=67.0530aff7.chunk.js.map